(this.webpackJsonpmon_app=this.webpackJsonpmon_app||[]).push([[0],{138:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(19),r=a.n(o),c=(a(61),a(30)),s=a(12),i=a(13),u=a(20),m=a(15),p=a(14),h=(a(62),a(42)),f=a.n(h),d=(a(84),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({nouveauCommentaire:e.target.value}),n.props.onInputChange(e.target.value),console.log("value dans compo = "+e.target.value)},n.state={nouveauCommentaire:""},n}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("input",{type:"text",placeholder:"Ajouter un commentaire",value:this.state.nouveauCommentaire,onChange:this.handleChange}))}}]),a}(n.Component));var v=function(e){var t=e.label;return l.a.createElement("div",null,l.a.createElement("div",{className:"pureh6"}," Vous: ",t))},g=(a(40),a(17)),E=a(51),C=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleClick=function(){n.props.selectFlat(n.props.flat),"pas encore de commentaire soyer le premier !"===n.props.flat.reviews?n.setState({content:[n.state.newCom.map((function(e){return l.a.createElement("ul",null,l.a.createElement("li",{key:e},e.author_name,": ",e.text))}))]}):(console.log(n.state.placeDetail),n.setState({textOverflow:"commentaire",content:[n.state.placeDetail.result.reviews.map((function(e){return l.a.createElement("ul",null,l.a.createElement("li",{key:e},e.author_name,": ",e.text))})),l.a.createElement("i",{className:"fas fa-times-circle fa-2x",onClick:n.masquer})]}))},n.commentaire=function(e){var t=[];if(e){for(var a=0;a<e.length;a++)t.push(e[a].reviews);return t}},n.moyenneDesEtoiles=function(e){var t=[];if(e){for(var a=0;a<e.length;a++)t.push(e[a].stars);return t.reduce((function(e,t){return e+t}),0)/e.length}},n.onInputChange=function(e){n.setState({stateApp:e})},n.envoyeCommentaire=function(e){var t="Vous: ".concat(n.state.stateApp);console.log(t);var a={author_name:"Vous",text:n.state.stateApp};"rien"===n.props.flat.place_id?(n.state.newCom.push(a),n.setState({content:[n.state.newCom.map((function(e){return l.a.createElement("ul",null,l.a.createElement("li",{key:e},e.author_name,": ",e.text))}))]})):(n.state.placeDetail.result.reviews.push(a),console.log(n.state.placeDetail.result.reviews),n.setState({textOverflow:"commentaire",content:[n.state.placeDetail.result.reviews.map((function(e){return l.a.createElement("ul",null,l.a.createElement("li",{key:e},e.author_name,": ",e.text))})),l.a.createElement("i",{className:"fas fa-arrow-circle-up fa-2x",onClick:n.masquer})]}))},n.masquer=function(){n.setState({content:null,textOverflow:null})},n.state={stateApp:" ",content:[],placeDetail:[],image:"",newCom:[],textOverflow:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.flat.place_id,a="https://maps.googleapis.com/maps/api/place/details/json?place_id=".concat(t,"&key=AIzaSyATaVEl_K2D9IcWPICwcog27_C1TsOQGr0");fetch("https://api.allorigins.win/get?url=".concat(encodeURIComponent(a))).then((function(e){return e.json()})).then((function(t){var a=JSON.parse(t.contents);console.log(a),e.setState({placeDetail:a})}))}},{key:"boucleCommentaire",value:function(){for(var e=0;e<this.state.content.length;e++)this.state.content[e].map((function(e){return l.a.createElement("li",{key:e}," ",e," ")}))}},{key:"render",value:function(){var e=this.props.flat.name,t="Note \xe9toile: ".concat(this.props.flat.rating);return l.a.createElement("div",{className:"flat"},l.a.createElement(g.a,{style:{width:"16rem"},className:"ombre"},l.a.createElement(g.a.Img,{variant:"top",src:"https://maps.googleapis.com/maps/api/streetview?size=600x600&location=".concat(this.props.flat.geometry.location.lat,",").concat(this.props.flat.geometry.location.lng,"&heading=360&pitch=-0.76&key=AIzaSyATaVEl_K2D9IcWPICwcog27_C1TsOQGr0"),className:"dimension",onClick:this.handleClick}),l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,e),l.a.createElement(g.a.Text,null,t),l.a.createElement("div",{className:this.state.textOverflow}," ",this.state.content," "),l.a.createElement(d,{label:this.state.stateApp,onInputChange:this.onInputChange}),this.state.stateApp?l.a.createElement(v,{label:this.state.stateApp}):l.a.createElement("div",null),l.a.createElement(E.a,{variant:"primary",onClick:this.envoyeCommentaire,className:"bouton"},"Envoyer")),l.a.createElement(g.a.Footer,null,l.a.createElement("div",{className:"icone"},l.a.createElement("i",{className:"fab fa-facebook"}),l.a.createElement("i",{className:"fab fa-instagram"}),l.a.createElement("i",{className:"fab fa-twitter"})))))}}]),a}(l.a.Component),y=(a(85),function(e){var t=e.color,a=e.name;return l.a.createElement("div",null,l.a.createElement("div",{className:"pin bounce",style:{backgroundColor:t,cursor:"pointer"},title:a}),l.a.createElement("div",{className:"pulse"}))}),b=a(44),w=a.n(b),N=a(140),k=(a(99),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(N.a,{collapseOnSelect:!0,expand:"sm",className:"navbar-custom ",variant:"dark"},l.a.createElement(N.a.Brand,{href:"#home"},"Express-Food"),l.a.createElement(N.a.Toggle,{"aria-controls":"responsive-navbar-nav"})))}}]),a}(l.a.Component)),O=a(9),S=a(29),x=a(49),F=a(23),j=a(10),I=a(46),A=function(){return l.a.createElement(I.BoxLoading,null)},_=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).selectFlat=function(e){n.setState({selectedFlat:e}),console.log(e)},n.handleSearch=function(e){n.setState({search:e.target.value,flats:n.state.allFlats.filter((function(t){return new RegExp(e.target.value,"i").exec(t.name)})),selectedFlat:null})},n.handleChange=function(e){n.setState({value:e.target.value,flats:n.state.allFlats.filter((function(t){return new RegExp(e.target.value,"i").exec(Math.floor(t.rating))})),selectedFlat:null})},n.recupeNum=function(e){n.setState({num:e.target.value}),console.log(n.state.num)},n.recupeNume=function(e){n.setState({nume:e.target.value}),console.log(n.state.nume)},n.filtrage=function(){n.state.num>n.state.nume||n.state.num===n.state.nume?alert("mauvaise saisie veillez recommencer"):n.setState({flats:n.state.allFlats.filter((function(e){return new RegExp("[".concat(n.state.num,"-").concat(n.state.nume,"]"),"g").exec(Math.floor(e.rating))})),selectedFlat:null})},n.handleMapClick=function(e){n.setState({alert:l.a.createElement(w.a,{input:!0,showCancel:!0,cancelBtnBsStyle:"default",title:"Nom du restaurant",onConfirm:function(e){return t(e)},onCancel:n.hideAlert})});var t=function(t){var a=t;console.log(a),n.setState({alert:null}),console.log("click");var l=e.lng,o=e.lat;console.log(o),console.log(l);var r={name:a,imageUrl:"https://www.my-business-plan.fr/sites/default/files/Restaurant.jpg",geometry:{location:{lat:o,lng:l}},place_id:"rien",photos:[{photo_reference:"rien"}],reviews:"pas encore de commentaire soyer le premier !",rating:0};n.setState((function(e){return{flats:[r].concat(Object(c.a)(e.flats)),allFlats:[r].concat(Object(c.a)(e.allFlats))}}))}},n.hideAlert=function(){n.setState({alert:null})},n.state={flats:[],allFlats:[],selectedFlat:null,search:"",info:null,latitude:null,longitude:null,value:"",alert:null,nouveauNom:"",num:"",nume:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleMapClick=n.handleMapClick.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude});var a="https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurant&location=".concat(t.coords.latitude,",").concat(t.coords.longitude,"&radius=5000&keyword=cruise&key=AIzaSyAURsom7c-jmbNERN0wVqb4OzVten2Hy24");fetch("https://api.allorigins.win/get?url=".concat(encodeURIComponent(a))).then((function(e){return e.json()}),console.log("envoyer")).then((function(t){console.log(t);var a=JSON.parse(t.contents);e.setState({flats:a.results,allFlats:a.results})})).catch((function(e){console.log("Il y a eu un probl\xe8me avec l'op\xe9ration fetch: "+e.message)})),console.log("Latitude is :",t.coords.latitude),console.log(e.state.flats),console.log(e.state.allFlats),console.log(a)}),(function(t){switch(t.code){case t.PERMISSION_DENIED:alert("vous avez refuser la Geolocation, Carte sur Paris par default"),e.setState({latitude:48.8534,longitude:2.3488});var a="https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=48.8534,2.3488&radius=2000&type=restaurant&keyword=cruise&key=AIzaSyATaVEl_K2D9IcWPICwcog27_C1TsOQGr0";fetch("https://api.allorigins.win/get?url=".concat(encodeURIComponent(a))).then((function(e){return e.json()})).then((function(t){console.log(t);var a=JSON.parse(t.contents);e.setState({flats:a.results,allFlats:a.results})})),console.log(a);break;case t.POSITION_UNAVAILABLE:alert(" Les informations de localisation ne sont pas disponibles.");break;case t.TIMEOUT:alert("la demande d'obtention de votre localisation est trop longue.");break;case t.UNKNOWN_ERROR:alert("Une erreur inconnue est survenued.");break;default:alert("Une erreur inconnue est survenue.")}}))}},{key:"render",value:function(){var e=this,t={lat:this.state.latitude,lng:this.state.longitude};return this.state.selectedFlat&&(t={lat:this.state.selectedFlat.geometry.location.lat,lng:this.state.selectedFlat.geometry.location.lng},console.log(this.state.selectedFlat)),l.a.createElement("div",{className:"Container"},l.a.createElement(k,null),l.a.createElement("div",{className:"haut"}),l.a.createElement("div",{className:"intro"},l.a.createElement("p",{className:"teste"},"les meilleurs restaurants proche de chez vous"),l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},l.a.createElement("path",{fill:"#0099ff",fillOpacity:"1",d:"M0,192L48,176C96,160,192,128,288,138.7C384,149,480,203,576,197.3C672,192,768,128,864,101.3C960,75,1056,85,1152,112C1248,139,1344,181,1392,202.7L1440,224L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"}))),l.a.createElement(x.a,null,l.a.createElement(S.a,{className:"justify-content-md-center"},l.a.createElement(O.a,{xs:12,md:6},l.a.createElement("h4",null,l.a.createElement(F.a,{variant:"dark"},"Filtre Par Nom ")),l.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"recherche par nom","aria-label":"Search",value:this.state.search,onChange:this.handleSearch}),l.a.createElement(j.a.Group,{controlId:"exampleForm.ControlSelect1"},l.a.createElement("h4",{className:"top"},l.a.createElement(F.a,{variant:"primary"},"Filtre Par Etoile ")),l.a.createElement(j.a.Control,{as:"select",value:this.state.value,onChange:this.handleChange},l.a.createElement("option",{value:""},"Selectionner"),l.a.createElement("option",{value:"0"},"0"),l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"2"},"2"),l.a.createElement("option",{value:"3"},"3"),l.a.createElement("option",{value:"4"},"4"),l.a.createElement("option",{value:"5"},"5")))),l.a.createElement(O.a,{xs:12,md:7},l.a.createElement("h4",null,l.a.createElement(F.a,{variant:"secondary"},"Filtre entre deux Etoiles")),l.a.createElement(S.a,null,l.a.createElement(O.a,null,l.a.createElement(j.a,null,l.a.createElement(j.a.Group,{controlId:"exampleForm.ControlSelect2"},l.a.createElement(j.a.Control,{as:"select",value:this.state.num,onChange:this.recupeNum},l.a.createElement("option",{value:""},"Derouler"),l.a.createElement("option",{value:"0"},"0"),l.a.createElement("option",null,"1"),l.a.createElement("option",null,"2"),l.a.createElement("option",null,"3"),l.a.createElement("option",null,"4"),l.a.createElement("option",null,"5"))))),l.a.createElement(O.a,null,l.a.createElement(j.a,null,l.a.createElement(j.a.Group,{controlId:"exampleForm.ControlSelect3"},l.a.createElement(j.a.Control,{as:"select",value:this.state.nume,onChange:this.recupeNume},l.a.createElement("option",{value:""},"Derouler"),l.a.createElement("option",{value:"0"},"0"),l.a.createElement("option",null,"1"),l.a.createElement("option",null,"2"),l.a.createElement("option",null,"3"),l.a.createElement("option",null,"4"),l.a.createElement("option",null,"5")))))),l.a.createElement("h4",null,l.a.createElement(E.a,{onClick:this.filtrage,type:"submit"},"Filtrer"))),l.a.createElement(O.a,{xs:12,sm:12,md:8},l.a.createElement("div",{className:"map"},this.state.alert&&this.state.alert,l.a.createElement(f.a,{bootstrapURLKeys:{key:"AIzaSyAURsom7c-jmbNERN0wVqb4OzVten2Hy24"},center:t,zoom:12,options:{draggableCursor:"crosshair"},onClick:this.handleMapClick},this.state.flats&&this.state.flats.map((function(e){return l.a.createElement(y,{key:e.name,lat:e.geometry.location.lat,lng:e.geometry.location.lng,color:"blue"})})),this.state.selectedFlat&&Object.keys(this.state.selectedFlat).map((function(t){return l.a.createElement(y,{key:t.name,lat:e.state.selectedFlat.geometry.location.lat,lng:e.state.selectedFlat.geometry.location.lng,color:"green"})})),l.a.createElement(y,{lat:this.state.latitude,lng:this.state.longitude,text:"Ma position",color:"red"})))),l.a.createElement(O.a,{xs:12,sm:12,md:4},l.a.createElement("div",{className:"main"},l.a.createElement(A,null),l.a.createElement("div",{className:"flats"},console.log(this.state.flats),this.state.flats&&this.state.flats.map((function(t){return l.a.createElement(C,{key:t.name,flat:t,selectFlat:e.selectFlat,place:t.place_id})}))))))),l.a.createElement("div",{className:"pied"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},l.a.createElement("path",{fill:"#0099ff",fillOpacity:"1",d:"M0,32L60,58.7C120,85,240,139,360,186.7C480,235,600,277,720,293.3C840,309,960,299,1080,256C1200,213,1320,139,1380,101.3L1440,64L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"}))),l.a.createElement("div",{className:"milieu"}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports=a(138)},61:function(e,t,a){},62:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},99:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.ceaa40d6.chunk.js.map